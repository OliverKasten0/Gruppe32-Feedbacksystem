<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Feedbacksession</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style>

    .flex-container {
      display: flex;
      border: 3px solid #000a65;
      justify-content: center;
      align-items: start;
      height: 89vh;
    }

    .header {
      font-size: 36pt;
      font-weight: bold;
      background-color: #839aff;
      color: #000a65;
      padding: 15px;
      display: flex;
      justify-content: center;
      text-align: center;
    }
    .arrowbutton {
      color: green;
      background-color: white;
      width: 50px;
      height: 50px;
      font-size: 25px;
      justify-content: center;
      text-align: center;
    }
    .arrowbutton:hover {
      background-color: #f1f1f1;
    }
    .star {
    font-size: 8vh;
    cursor: pointer;
    }
    .success-message {
      color: green;
      font-weight: bold;
      margin-left: 10px;
      display: none;
      position: absolute;
    }
  </style>
  <script>
    let count = 10;
    function commentCounter(count) {
      let e = document.getElementById("commentButtonSlot");
      let b = document.getElementById("timer");
      e.hidden = true;

      const timer = setInterval(function() {
        count -=1;
        b.innerText = "Kommentare sind verfügbar in: " + count;
        if (count === 0) {
          clearInterval(timer);
          e.hidden = false;
          b.innerText = "Kommentare freigeschaltet!"
          return;
        }
      }, 1000);
    }

    function setStarRating(n, row) {
      let stars = Array.from(document.getElementsByClassName("star " + row));
      removeStarRating(row);
      for (let i = 0; i < n; i++) {
        if (parseInt(stars[i].getAttribute("pos")) == (i + 1)) {
          stars[i].innerText = "★";
          stars[i].style.color = "gold";
          stars[i].className = "star active " + row;
        }
      }
    }

    function removeStarRating(row) {
      let stars = Array.from(document.getElementsByClassName("star " + row));
      stars.forEach (star => {
        star.innerText = "☆";
        star.style.color = "black";
        star.className = "star inactive " + row;
      });

    }

    function showSuccessMessage(elementId) {
      let msg = document.getElementById(elementId);
      msg.style.display = "inline";
      setTimeout(function() {
        msg.style.display = "none";
      }, 3000);
    }
  </script>
</head>

<body onLoad="commentCounter(count)">
  <div class="header">Insert Kursname here</div>
  <!-- one container for all feedback elements -->
  <div id="feedbackContainer" class="flex-container">
    <div>
      <table id="itemTable" style="align-items: center; text-align: center">
        <tr>
          <td>
            <h1>Verständlichkeit Sprache</h1>
            <span onclick="setStarRating(1, 1)" class="star inactive 1" pos="1">☆</span>
            <span onclick="setStarRating(2, 1)" class="star inactive 1" pos="2">☆</span>
            <span onclick="setStarRating(3, 1)" class="star inactive 1" pos="3">☆</span>
            <span onclick="setStarRating(4, 1)" class="star inactive 1" pos="4">☆</span>
            <span onclick="setStarRating(5, 1)" class="star inactive 1" pos="5">☆</span>
          </td>
        </tr>
        <tr>
          <td>
            <h1>Verständlichkeit Inhalt</h1>
            <span onclick="setStarRating(1, 2)" class="star inactive 2" pos="1">☆</span>
            <span onclick="setStarRating(2, 2)" class="star inactive 2" pos="2">☆</span>
            <span onclick="setStarRating(3, 2)" class="star inactive 2" pos="3">☆</span>
            <span onclick="setStarRating(4, 2)" class="star inactive 2" pos="4">☆</span>
            <span onclick="setStarRating(5, 2)" class="star inactive 2" pos="5">☆</span>
          </td>
        </tr>
        <tr>
          <td>
            <h1>Verständlichkeit Folien</h1>
            <span onclick="setStarRating(1, 3)" class="star inactive 3" pos="1">☆</span>
            <span onclick="setStarRating(2, 3)" class="star inactive 3" pos="2">☆</span>
            <span onclick="setStarRating(3, 3)" class="star inactive 3" pos="3">☆</span>
            <span onclick="setStarRating(4, 3)" class="star inactive 3" pos="4">☆</span>
            <span onclick="setStarRating(5, 3)" class="star inactive 3" pos="5">☆</span>
          </td>
        </tr>
        <tr  style="text-align: right">
          <td>
            <button class="arrowbutton"
                    id="starButton"
                    onclick="showSuccessMessage('starSuccess'); removeStarRating(1); removeStarRating(2); removeStarRating(3);">
              <i class="fa fa-arrow-right"></i></button>
            <span id="starSuccess" class="success-message">Erfolgreich abgeschickt!</span>
          </td>
        </tr>
        <tr>
          <td>
            <h3 style="border: 3px solid #222222"></h3>
          </td>
        </tr>
        <tr>
          <td>
            <h1>Dein Kommentar</h1>
            <h4 id="timer"></h4>
            <input type="text" id="comment" placeholder="Dein Kommentar..."/>
          </td>
        </tr>
        <tr id="commentButtonSlot" style="text-align: right">
          <td>
            <!-- hier sollte dann ne art Aktivierungscheck sein der guckt ob kommentare freuigeschaltet sind,
            kann ja erstmal per 10sek timer laufen wenn die Seite lädt -->
            <button class="arrowbutton"
                    id="commentButton"
                    onclick="showSuccessMessage('commentSuccess')">
              <i class="fa fa-arrow-right"></i>
            </button>
            <span id="commentSuccess" class="success-message">Erfolgreich abgeschickt!</span>
          </td>
        </tr>
      </table>
    </div>
  </div>
</body>
</html>
